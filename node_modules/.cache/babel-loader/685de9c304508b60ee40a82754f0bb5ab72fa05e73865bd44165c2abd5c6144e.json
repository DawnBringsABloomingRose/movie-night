{"ast":null,"code":"\"use client\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useCallback, useContext } from 'react';\nimport classNames from 'classnames';\nimport { getMergedStatus, getStatusClassNames } from '../_util/statusUtils';\nimport { groupDisabledKeysMap, groupKeysMap } from '../_util/transKeys';\nimport { devUseWarning } from '../_util/warning';\nimport { ConfigContext } from '../config-provider';\nimport DefaultRenderEmpty from '../config-provider/defaultRenderEmpty';\nimport { FormItemInputContext } from '../form/context';\nimport { useLocale } from '../locale';\nimport defaultLocale from '../locale/en_US';\nimport useData from './hooks/useData';\nimport useSelection from './hooks/useSelection';\nimport List from './list';\nimport Operation from './operation';\nimport Search from './search';\nimport useStyle from './style';\nconst Transfer = props => {\n  const dataSource = props.dataSource,\n    _props$targetKeys = props.targetKeys,\n    targetKeys = _props$targetKeys === void 0 ? [] : _props$targetKeys,\n    selectedKeys = props.selectedKeys,\n    _props$selectAllLabel = props.selectAllLabels,\n    selectAllLabels = _props$selectAllLabel === void 0 ? [] : _props$selectAllLabel,\n    _props$operations = props.operations,\n    operations = _props$operations === void 0 ? [] : _props$operations,\n    _props$style = props.style,\n    style = _props$style === void 0 ? {} : _props$style,\n    _props$listStyle = props.listStyle,\n    listStyle = _props$listStyle === void 0 ? {} : _props$listStyle,\n    _props$locale = props.locale,\n    locale = _props$locale === void 0 ? {} : _props$locale,\n    titles = props.titles,\n    disabled = props.disabled,\n    _props$showSearch = props.showSearch,\n    showSearch = _props$showSearch === void 0 ? false : _props$showSearch,\n    operationStyle = props.operationStyle,\n    showSelectAll = props.showSelectAll,\n    oneWay = props.oneWay,\n    pagination = props.pagination,\n    customStatus = props.status,\n    customizePrefixCls = props.prefixCls,\n    className = props.className,\n    rootClassName = props.rootClassName,\n    selectionsIcon = props.selectionsIcon,\n    filterOption = props.filterOption,\n    render = props.render,\n    footer = props.footer,\n    children = props.children,\n    rowKey = props.rowKey,\n    onScroll = props.onScroll,\n    onChange = props.onChange,\n    onSearch = props.onSearch,\n    onSelectChange = props.onSelectChange;\n  const _useContext = useContext(ConfigContext),\n    getPrefixCls = _useContext.getPrefixCls,\n    renderEmpty = _useContext.renderEmpty,\n    dir = _useContext.direction,\n    transfer = _useContext.transfer;\n  const prefixCls = getPrefixCls('transfer', customizePrefixCls);\n  const _useStyle = useStyle(prefixCls),\n    _useStyle2 = _slicedToArray(_useStyle, 2),\n    wrapSSR = _useStyle2[0],\n    hashId = _useStyle2[1];\n  // Fill record with `key`\n  const _useData = useData(dataSource, rowKey, targetKeys),\n    _useData2 = _slicedToArray(_useData, 3),\n    mergedDataSource = _useData2[0],\n    leftDataSource = _useData2[1],\n    rightDataSource = _useData2[2];\n  // Get direction selected keys\n  const _useSelection = useSelection(leftDataSource, rightDataSource, selectedKeys),\n    _useSelection2 = _slicedToArray(_useSelection, 4),\n    // Keys\n    sourceSelectedKeys = _useSelection2[0],\n    targetSelectedKeys = _useSelection2[1],\n    // Setters\n    setSourceSelectedKeys = _useSelection2[2],\n    setTargetSelectedKeys = _useSelection2[3];\n  if (process.env.NODE_ENV !== 'production') {\n    const warning = devUseWarning('Transfer');\n    process.env.NODE_ENV !== \"production\" ? warning(!pagination || !children, 'usage', '`pagination` not support customize render list.') : void 0;\n  }\n  const setStateKeys = useCallback((direction, keys) => {\n    if (direction === 'left') {\n      const nextKeys = typeof keys === 'function' ? keys(sourceSelectedKeys || []) : keys;\n      setSourceSelectedKeys(nextKeys);\n    } else {\n      const nextKeys = typeof keys === 'function' ? keys(targetSelectedKeys || []) : keys;\n      setTargetSelectedKeys(nextKeys);\n    }\n  }, [sourceSelectedKeys, targetSelectedKeys]);\n  const handleSelectChange = useCallback((direction, holder) => {\n    if (direction === 'left') {\n      onSelectChange === null || onSelectChange === void 0 ? void 0 : onSelectChange(holder, targetSelectedKeys);\n    } else {\n      onSelectChange === null || onSelectChange === void 0 ? void 0 : onSelectChange(sourceSelectedKeys, holder);\n    }\n  }, [sourceSelectedKeys, targetSelectedKeys]);\n  const getTitles = transferLocale => {\n    var _a;\n    return (_a = titles !== null && titles !== void 0 ? titles : transferLocale.titles) !== null && _a !== void 0 ? _a : [];\n  };\n  const handleLeftScroll = e => {\n    onScroll === null || onScroll === void 0 ? void 0 : onScroll('left', e);\n  };\n  const handleRightScroll = e => {\n    onScroll === null || onScroll === void 0 ? void 0 : onScroll('right', e);\n  };\n  const moveTo = direction => {\n    const moveKeys = direction === 'right' ? sourceSelectedKeys : targetSelectedKeys;\n    const dataSourceDisabledKeysMap = groupDisabledKeysMap(mergedDataSource);\n    // filter the disabled options\n    const newMoveKeys = moveKeys.filter(key => !dataSourceDisabledKeysMap.has(key));\n    const newMoveKeysMap = groupKeysMap(newMoveKeys);\n    // move items to target box\n    const newTargetKeys = direction === 'right' ? newMoveKeys.concat(targetKeys) : targetKeys.filter(targetKey => !newMoveKeysMap.has(targetKey));\n    // empty checked keys\n    const oppositeDirection = direction === 'right' ? 'left' : 'right';\n    setStateKeys(oppositeDirection, []);\n    handleSelectChange(oppositeDirection, []);\n    onChange === null || onChange === void 0 ? void 0 : onChange(newTargetKeys, direction, newMoveKeys);\n  };\n  const moveToLeft = () => {\n    moveTo('left');\n  };\n  const moveToRight = () => {\n    moveTo('right');\n  };\n  const onItemSelectAll = (direction, keys, checkAll) => {\n    setStateKeys(direction, prevKeys => {\n      let mergedCheckedKeys = [];\n      if (checkAll === 'replace') {\n        mergedCheckedKeys = keys;\n      } else if (checkAll) {\n        // Merge current keys with origin key\n        mergedCheckedKeys = Array.from(new Set([].concat(_toConsumableArray(prevKeys), _toConsumableArray(keys))));\n      } else {\n        const selectedKeysMap = groupKeysMap(keys);\n        // Remove current keys from origin keys\n        mergedCheckedKeys = prevKeys.filter(key => !selectedKeysMap.has(key));\n      }\n      handleSelectChange(direction, mergedCheckedKeys);\n      return mergedCheckedKeys;\n    });\n  };\n  const onLeftItemSelectAll = (keys, checkAll) => {\n    onItemSelectAll('left', keys, checkAll);\n  };\n  const onRightItemSelectAll = (keys, checkAll) => {\n    onItemSelectAll('right', keys, checkAll);\n  };\n  const leftFilter = e => onSearch === null || onSearch === void 0 ? void 0 : onSearch('left', e.target.value);\n  const rightFilter = e => onSearch === null || onSearch === void 0 ? void 0 : onSearch('right', e.target.value);\n  const handleLeftClear = () => onSearch === null || onSearch === void 0 ? void 0 : onSearch('left', '');\n  const handleRightClear = () => onSearch === null || onSearch === void 0 ? void 0 : onSearch('right', '');\n  const onItemSelect = (direction, selectedKey, checked) => {\n    const holder = _toConsumableArray(direction === 'left' ? sourceSelectedKeys : targetSelectedKeys);\n    const index = holder.indexOf(selectedKey);\n    if (index > -1) {\n      holder.splice(index, 1);\n    }\n    if (checked) {\n      holder.push(selectedKey);\n    }\n    handleSelectChange(direction, holder);\n    if (!props.selectedKeys) {\n      setStateKeys(direction, holder);\n    }\n  };\n  const onLeftItemSelect = (selectedKey, checked) => {\n    onItemSelect('left', selectedKey, checked);\n  };\n  const onRightItemSelect = (selectedKey, checked) => {\n    onItemSelect('right', selectedKey, checked);\n  };\n  const onRightItemRemove = keys => {\n    setStateKeys('right', []);\n    onChange === null || onChange === void 0 ? void 0 : onChange(targetKeys.filter(key => !keys.includes(key)), 'left', _toConsumableArray(keys));\n  };\n  const handleListStyle = direction => {\n    if (typeof listStyle === 'function') {\n      return listStyle({\n        direction\n      });\n    }\n    return listStyle || {};\n  };\n  const formItemContext = useContext(FormItemInputContext);\n  const hasFeedback = formItemContext.hasFeedback,\n    status = formItemContext.status;\n  const getLocale = transferLocale => Object.assign(Object.assign(Object.assign({}, transferLocale), {\n    notFoundContent: (renderEmpty === null || renderEmpty === void 0 ? void 0 : renderEmpty('Transfer')) || /*#__PURE__*/React.createElement(DefaultRenderEmpty, {\n      componentName: \"Transfer\"\n    })\n  }), locale);\n  const mergedStatus = getMergedStatus(status, customStatus);\n  const mergedPagination = !children && pagination;\n  const leftActive = targetSelectedKeys.length > 0;\n  const rightActive = sourceSelectedKeys.length > 0;\n  const cls = classNames(prefixCls, {\n    [`${prefixCls}-disabled`]: disabled,\n    [`${prefixCls}-customize-list`]: !!children,\n    [`${prefixCls}-rtl`]: dir === 'rtl'\n  }, getStatusClassNames(prefixCls, mergedStatus, hasFeedback), transfer === null || transfer === void 0 ? void 0 : transfer.className, className, rootClassName, hashId);\n  const _useLocale = useLocale('Transfer', defaultLocale.Transfer),\n    _useLocale2 = _slicedToArray(_useLocale, 1),\n    contextLocale = _useLocale2[0];\n  const listLocale = getLocale(contextLocale);\n  const _getTitles = getTitles(listLocale),\n    _getTitles2 = _slicedToArray(_getTitles, 2),\n    leftTitle = _getTitles2[0],\n    rightTitle = _getTitles2[1];\n  return wrapSSR( /*#__PURE__*/React.createElement(\"div\", {\n    className: cls,\n    style: Object.assign(Object.assign({}, transfer === null || transfer === void 0 ? void 0 : transfer.style), style)\n  }, /*#__PURE__*/React.createElement(List, Object.assign({\n    prefixCls: `${prefixCls}-list`,\n    titleText: leftTitle,\n    dataSource: leftDataSource,\n    filterOption: filterOption,\n    style: handleListStyle('left'),\n    checkedKeys: sourceSelectedKeys,\n    handleFilter: leftFilter,\n    handleClear: handleLeftClear,\n    onItemSelect: onLeftItemSelect,\n    onItemSelectAll: onLeftItemSelectAll,\n    render: render,\n    showSearch: showSearch,\n    renderList: children,\n    footer: footer,\n    onScroll: handleLeftScroll,\n    disabled: disabled,\n    direction: dir === 'rtl' ? 'right' : 'left',\n    showSelectAll: showSelectAll,\n    selectAllLabel: selectAllLabels[0],\n    pagination: mergedPagination,\n    selectionsIcon: selectionsIcon\n  }, listLocale)), /*#__PURE__*/React.createElement(Operation, {\n    className: `${prefixCls}-operation`,\n    rightActive: rightActive,\n    rightArrowText: operations[0],\n    moveToRight: moveToRight,\n    leftActive: leftActive,\n    leftArrowText: operations[1],\n    moveToLeft: moveToLeft,\n    style: operationStyle,\n    disabled: disabled,\n    direction: dir,\n    oneWay: oneWay\n  }), /*#__PURE__*/React.createElement(List, Object.assign({\n    prefixCls: `${prefixCls}-list`,\n    titleText: rightTitle,\n    dataSource: rightDataSource,\n    filterOption: filterOption,\n    style: handleListStyle('right'),\n    checkedKeys: targetSelectedKeys,\n    handleFilter: rightFilter,\n    handleClear: handleRightClear,\n    onItemSelect: onRightItemSelect,\n    onItemSelectAll: onRightItemSelectAll,\n    onItemRemove: onRightItemRemove,\n    render: render,\n    showSearch: showSearch,\n    renderList: children,\n    footer: footer,\n    onScroll: handleRightScroll,\n    disabled: disabled,\n    direction: dir === 'rtl' ? 'left' : 'right',\n    showSelectAll: showSelectAll,\n    selectAllLabel: selectAllLabels[1],\n    showRemove: oneWay,\n    pagination: mergedPagination,\n    selectionsIcon: selectionsIcon\n  }, listLocale))));\n};\nif (process.env.NODE_ENV !== 'production') {\n  Transfer.displayName = 'Transfer';\n}\nTransfer.List = List;\nTransfer.Search = Search;\nTransfer.Operation = Operation;\nexport default Transfer;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}