{"ast":null,"code":"var _jsxFileName = \"/home/emily/Documents/programming/rails/movie-night/app/javascript/components/SuggestionHome.jsx\";\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return typeof key === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (typeof input !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (typeof res !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nimport { message, Popconfirm, List } from \"antd\";\nimport React from \"react\";\nimport Movie from \"./Movie\";\nimport Api from \"./helpers/api\";\nvar Suggestions = /*#__PURE__*/function (_React$Component) {\n  _inherits(Suggestions, _React$Component);\n  var _super = _createSuper(Suggestions);\n  function Suggestions() {\n    var _this;\n    _classCallCheck(this, Suggestions);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.columns = [{\n      title: \"Movie\",\n      dataIndex: \"movie\",\n      key: \"movie\"\n    }, {\n      title: \"\",\n      key: \"action\",\n      render: function render(_text, record) {\n        return /*#__PURE__*/React.createElement(Popconfirm, {\n          title: \"Are you sure to delete this suggestion?\",\n          onConfirm: function onConfirm() {\n            return _this.deletesuggestion(record.id);\n          },\n          okText: \"Yes\",\n          cancelText: \"No\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(\"a\", {\n          href: \"#\",\n          type: \"danger\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 18,\n            columnNumber: 11\n          }\n        }, \"Delete\", \" \"));\n      }\n    }];\n    _this.state = {\n      suggestions: []\n    };\n    /*loadsuggestions = () => {\n      api = new Api();\n      api.getCall('suggestions/index').then((data) => \n      data.forEach((suggestion) => {\n        const newEl = {\n          key: suggestion.id,\n          id: suggestion.id,\n          movie: suggestion.movie,\n          user: suggestion.user,\n          likes: suggestion.likes,\n          blocks: suggestion.blocks,\n        };\n         this.setState((prevState) => ({\n          suggestions: [...prevState.suggestions, newEl],\n        }));\n      }));\n    } */\n    _this.loadsuggestions = function () {\n      var url = \"api/v1/suggestions/index\";\n      fetch(url).then(function (data) {\n        if (data.ok) {\n          return data.json();\n        }\n        throw new Error(\"Network error.\");\n      }).then(function (data) {\n        data.forEach(function (suggestion) {\n          var newEl = {\n            key: suggestion.id,\n            id: suggestion.id,\n            movie: suggestion.movie,\n            user: suggestion.user,\n            likes: suggestion.likes,\n            blocks: suggestion.blocks\n          };\n          _this.setState(function (prevState) {\n            return {\n              suggestions: [].concat(_toConsumableArray(prevState.suggestions), [newEl])\n            };\n          });\n        });\n      })[\"catch\"](function (err) {\n        return message.error(\"Error: \" + err);\n      });\n    };\n    _this.reloadsuggestions = function () {\n      _this.setState({\n        suggestions: []\n      });\n      _this.loadsuggestions();\n    };\n    _this.deletesuggestion = function (id) {\n      var url = \"api/v1/suggestions/\".concat(id);\n      fetch(url, {\n        method: \"delete\"\n      }).then(function (data) {\n        if (data.ok) {\n          _this.reloadsuggestions();\n          return data.json();\n        }\n        throw new Error(\"Network error.\");\n      })[\"catch\"](function (err) {\n        return message.error(\"Error: \" + err);\n      });\n    };\n    return _this;\n  }\n  _createClass(Suggestions, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.loadsuggestions();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var movies = this.state.suggestions.map(function (movie) {\n        return /*#__PURE__*/React.createElement(\"li\", {\n          key: movie.id,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 7\n          }\n        }, /*#__PURE__*/React.createElement(Movie, {\n          movie: movie.movie,\n          suggested: true,\n          user: movie.user,\n          likes: movie.likes,\n          currentUser: _this2.props.currentUser,\n          id: movie.id,\n          blocks: movie.blocks,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 26\n          }\n        }));\n      });\n      return (\n        /*#__PURE__*/\n        /*<>\n          <Table className=\"table-striped-rows\" dataSource={this.state.suggestions} columns={this.columns} pagination={{ pageSize: 5 }} />\n           <AddSuggestionModal reloadsuggestions={this.reloadsuggestions} />\n        </> */\n        React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(List, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 7\n          }\n        }, movies))\n      );\n    }\n  }]);\n  return Suggestions;\n}(React.Component);\nexport default Suggestions;","map":{"version":3,"names":["message","Popconfirm","List","React","Movie","Api","Suggestions","_React$Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","columns","title","dataIndex","key","render","_text","record","createElement","onConfirm","deletesuggestion","id","okText","cancelText","__self","_assertThisInitialized","__source","fileName","_jsxFileName","lineNumber","columnNumber","href","type","state","suggestions","loadsuggestions","url","fetch","then","data","ok","json","Error","forEach","suggestion","newEl","movie","user","likes","blocks","setState","prevState","_toConsumableArray","err","error","reloadsuggestions","method","_createClass","value","componentDidMount","_this2","movies","map","suggested","currentUser","props","Fragment","Component"],"sources":["/home/emily/Documents/programming/rails/movie-night/app/javascript/components/SuggestionHome.jsx"],"sourcesContent":["import { message, Popconfirm, List } from \"antd\";\nimport React from \"react\";\nimport Movie from \"./Movie\";\nimport Api from \"./helpers/api\";\n\nclass Suggestions extends React.Component {\n  columns = [\n    {\n      title: \"Movie\",\n      dataIndex: \"movie\",\n      key: \"movie\",\n    },\n    {\n      title: \"\",\n      key: \"action\",\n      render: (_text, record) => (\n        <Popconfirm title=\"Are you sure to delete this suggestion?\" onConfirm={() => this.deletesuggestion(record.id)} okText=\"Yes\" cancelText=\"No\">\n          <a href=\"#\" type=\"danger\">\n            Delete{\" \"}\n          </a>\n        </Popconfirm>\n      ),\n    },\n  ];\n\n  state = {\n    suggestions: [],\n  };\n\n  componentDidMount() {\n    this.loadsuggestions();\n  }\n\n  /*loadsuggestions = () => {\n    api = new Api();\n    api.getCall('suggestions/index').then((data) => \n    data.forEach((suggestion) => {\n      const newEl = {\n        key: suggestion.id,\n        id: suggestion.id,\n        movie: suggestion.movie,\n        user: suggestion.user,\n        likes: suggestion.likes,\n        blocks: suggestion.blocks,\n      };\n\n      this.setState((prevState) => ({\n        suggestions: [...prevState.suggestions, newEl],\n      }));\n    }));\n  } */\n\n  loadsuggestions = () => {\n    const url = \"api/v1/suggestions/index\";\n    fetch(url)\n      .then((data) => {\n        if (data.ok) {\n          return data.json();\n        }\n        throw new Error(\"Network error.\");\n      })\n      .then((data) => {\n        data.forEach((suggestion) => {\n          const newEl = {\n            key: suggestion.id,\n            id: suggestion.id,\n            movie: suggestion.movie,\n            user: suggestion.user,\n            likes: suggestion.likes,\n            blocks: suggestion.blocks,\n          };\n\n          this.setState((prevState) => ({\n            suggestions: [...prevState.suggestions, newEl],\n          }));\n        });\n      })\n      .catch((err) => message.error(\"Error: \" + err));\n  };\n\n  reloadsuggestions = () => {\n    this.setState({ suggestions: [] });\n    this.loadsuggestions();\n  };\n\n  deletesuggestion = (id) => {\n    const url = `api/v1/suggestions/${id}`;\n\n    fetch(url, {\n      method: \"delete\",\n    })\n      .then((data) => {\n        if (data.ok) {\n          this.reloadsuggestions();\n          return data.json();\n        }\n        throw new Error(\"Network error.\");\n      })\n      .catch((err) => message.error(\"Error: \" + err));\n  };\n\n  render() {\n    var movies = this.state.suggestions.map(movie => \n      <li key={movie.id}><Movie movie = { movie.movie } suggested = {true} user = { movie.user } \n                                likes={movie.likes} currentUser={this.props.currentUser} id={movie.id}\n                                blocks={movie.blocks}/></li>\n    );\n    return (\n      /*<>\n        <Table className=\"table-striped-rows\" dataSource={this.state.suggestions} columns={this.columns} pagination={{ pageSize: 5 }} />\n\n        <AddSuggestionModal reloadsuggestions={this.reloadsuggestions} />\n      </> */\n      <>\n      <List>{movies}</List>\n      </> \n    );\n  }\n}\n\nexport default Suggestions;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}